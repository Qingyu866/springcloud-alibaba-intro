apiVersion: v1
kind: ConfigMap
metadata:
  name: rocketmq-config
  namespace: springcloud-alibaba
  labels:
    app: rocketmq
data:
  broker.conf: |
    brokerClusterName = DefaultCluster
    brokerName = broker-a
    brokerId = 0
    deleteWhen = 04
    fileReservedTime = 48
    brokerRole = ASYNC_MASTER
    flushDiskType = ASYNC_FLUSH
    brokerIP1 = rocketmq-broker-0.rocketmq-broker-headless.springcloud-alibaba.svc.cluster.local
    namesrvAddr = rocketmq-namesrv:9876
    autoCreateTopicEnable = true
    autoCreateSubscriptionGroup = true

    # 性能优化
    maxMessageSize = 4194304
    flushCommitLogLeastPages = 4
    flushConsumeQueueLeastPages = 2
    flushCommitLogThoroughInterval = 10000
    flushConsumeQueueThoroughInterval = 60000

    # 存储配置
    storePathRootDir = /home/rocketmq/store
    storePathCommitLog = /home/rocketmq/store/commitlog
